<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <title>Bavarder</title>
</head>

<body>
  <p id="chat_list"></p>
  <script th:inline="javascript">
    var contents = "";
    var myname = [[${ name }]];
    var result = [[${ results }]];
    var keyword = [[${ keyword }]];
    var action = [[${ action }]];
    if (action == "ユーザ検索") {
      for (var i = 0; i < result.length; i++) {
        contents = "<a href = \"/test1/showprofile?id=" + result[i].userid + "&keyword=" + keyword + "&action=" + action + "\">" + result[i].userid + "</a><br><br>" + contents;
      }
    } else {
      for (var i = 0; i < result.length; i++) {
        contents = "<br><br>" + contents;
        if (result[i].user == myname) {
          contents = "<a href=\"/test1/resultform?id=" + result[i].id + "&keyword=" + keyword + "&action=" + action + "\">編集</a> " + "<a href=\"/test1/resultdelete?id=" + result[i].id + "&keyword=" + keyword + "&action=" + action + "\">削除</a>" + contents;
        }
        contents = result[i].user + "<br>" + result[i].message + "<br>" + result[i].time + "<a href=\"/test1/resultiine?id=" + result[i].id + "&keyword=" + keyword + "&action=" + action + "\">★</a>" + result[i].iine + contents;
      }
    }
    document.getElementById("chat_list").innerHTML = contents;
  </script>

  <div th:if="${chat}">
    <form th:action="@{/test1/resultedit(id=${chat.id}, keyword=${keyword}, action=${action})}" method="post">
      <input type="text" name="message" th:value="${chat.message}" /><br>
      <input type="submit" value="編集"><input type="reset" value="リセット">
    </form>
  </div>

  <a href="/test1/rchat">チャット画面に戻る</a>
</body>

</html>
